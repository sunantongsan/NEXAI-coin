<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>NEXAI Web Wallet - Demo (LocalStorage)</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: auto; padding: 20px; }
    .card { border: 1px solid #ccc; padding: 16px; border-radius: 12px; margin-bottom: 20px; }
    input, button { padding: 10px; width: 100%; margin: 5px 0; }
    button { cursor: pointer; }
    .log { white-space: pre-wrap; background: #f7f7f7; padding: 10px; border-radius: 8px; }
  </style>
</head>
<body>
  <h1>NEXAI Web Wallet - Demo (LocalStorage)</h1>

  <div class="card">
    <h2>สร้างกระเป๋าใหม่</h2>
    <button onclick="createWallet()">สร้างกระเป๋า</button>
    <div id="createResult"></div>
  </div>

  <div class="card">
    <h2>โหลดกระเป๋า (JSON)</h2>
    <input id="loadJson" type="file" accept="application/json" />
    <button onclick="loadWallet()">โหลดกระเป๋า</button>
    <div id="walletInfo"></div>
  </div>

  <div class="card">
    <h2>รับเหรียญ (Address)</h2>
    <div id="addrBox">กรุณาโหลดหรือสร้างกระเป๋าก่อน</div>
  </div>

  <div class="card">
    <h2>ส่งเหรียญ</h2>
    <input id="toAddress" placeholder="Address ผู้รับ" />
    <input id="amount" placeholder="จำนวน NXI" type="number" />
    <button onclick="sendCoin()">ส่งเหรียญ</button>
    <div id="sendResult"></div>
  </div>

  <div class="card">
    <h2>เติมเหรียญ Demo</h2>
    <button onclick="mintDemo()">Mint 1,000,000 NXI ให้ demo address</button>
  </div>

  <div class="card">
    <h2>ประวัติธุรกรรม</h2>
    <div class="log" id="logBox">— ไม่มีข้อมูล —</div>
  </div>

<script>
let wallet = null;
let chain = { balances: {}, logs: [] };

function randHex(n) {
  const hex = '0123456789abcdef';
  let out = '';
  for (let i = 0; i < n; i++) out += hex[Math.floor(Math.random()*16)];
  return out;
}

// ===== LocalStorage Functions =====
function saveWallet() { if(wallet) localStorage.setItem('wallet', JSON.stringify(wallet)); }
function loadWalletFromStorage() {
  const w = localStorage.getItem('wallet');
  if(w){
    wallet = JSON.parse(w);
    document.getElementById('walletInfo').innerHTML = `<b>Address:</b> ${wallet.address}<br><b>Seed:</b> ${wallet.seed}`;
    document.getElementById('addrBox').innerText = wallet.address;
  }
}

function saveChain() { localStorage.setItem('chain', JSON.stringify(chain)); }
function loadChainFromStorage() {
  const c = localStorage.getItem('chain');
  if(c) chain = JSON.parse(c);
  updateLogs();
}

window.onload = function() {
  loadWalletFromStorage();
  loadChainFromStorage();
}

// ===== Wallet Functions =====
function createWallet() {
  const w = { network: "NEXAI-NXI", address: randHex(40), seed: randHex(64) };
  wallet = w;
  document.getElementById('createResult').innerHTML = `<p><b>Address:</b> ${w.address}</p><p><b>Seed:</b> ${w.seed}</p>`;
  document.getElementById('addrBox').innerTe
